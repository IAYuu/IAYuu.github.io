---
layout: single
title: 发送HTTP请求
---
## 背景
- 使用用户名和密码获取到我的青龙 `token`
- 通过 `token` 获取用户信息

## 实现
1. 登录并收到响应
```python
signin_url = 'https://host/open/auth/token'
client_id = 'id'
client_secret = 'secret'
signin_resp = requests.get(signin_url, params={"client_id": client_id, 
                                               "client_secret": client_secret})
```
2. 获取 `token`
```python
data = signin_resp.json()['data']
token = data['token']
```
3. 根据青龙的要求设置 `header` 完成安全校验，再次发送请求
```python
header = {"content_Type": "application/json;charset=UTF-8",
                          "Authorization": f"Bearer {token}"}
```
4. 请求青龙环境变量
```python
env_url = 'https://host/open/envs'
env_resp = requests.get(env_url, headers=header)
print(env_resp.json())
```


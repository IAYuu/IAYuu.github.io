---
layout: single
title: 处理表单
---
## 防止 `CSRF` 攻击
使用 `Flask-WTF` 为表单生成安全令牌，存储在用户会话中。令牌是加密签名，根据密钥生成
```python3
app.config['SECRET KEY'] = 'hard to guess'
```
- 检验表单数据
创建表单变量，将每个字段定义为类变量。各个变量的值是相应字段类型的对象
  - `WTForms` 支持生成多个 **标准字段的类** 以及 **内建函数**
- 把表单渲染成 `HTML`
- 重定向和用户会话
  1. `Post` / 重定向 / `Get` 请求
  `Post` 请求后刷新页面会发送新的 `Post` 请求，而实际情况是，用户只是单纯地想要刷新而已。
  因此需要 **重定向** 到一个新的 `URL` 并发送 `Get` 请求
  2. 但是！ `Post` 请求的数据需要保存，所以使用 **会话** ，即 `session`。每个连接到服务器的用户都可访问。
  > 用户会话保存在 `cookie` 中


